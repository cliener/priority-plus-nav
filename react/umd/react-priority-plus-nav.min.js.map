{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 0b006e59e0dd77dd04eb","webpack:///./src/index.js","webpack:///./src/PriorityPlusNav.js","webpack:///external {\"root\":\"React\",\"commonjs2\":\"react\",\"commonjs\":\"react\",\"amd\":\"react\"}"],"names":["root","factory","exports","module","require","define","amd","self","this","__WEBPACK_EXTERNAL_MODULE_3__","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","__webpack_exports__","__WEBPACK_IMPORTED_MODULE_0__PriorityPlusNav__","defaultRenderMenuItem","props","itemDetails","captureRef","clickHandler","activeClass","uri","label","isActive","__WEBPACK_IMPORTED_MODULE_0_react___default","a","createElement","className","key","ref","onClick","href","PriorityPlusNav","state","items","itemRefs","activeItems","inactiveItems","overflowActive","parentNode","overflowButton","hiddenMenu","activeMenu","itemMargin","updateMenuItems","length","_this","activeMenuChildren","children","slice","concat","setState","totalWidth","parentWidth","offsetWidth","overflowedIndex","findIndex","item","index","active","pop","inactive","handleMenuItemClick","toggleExtendedMenu","handleResize","handleOverflowMenuClick","event","preventDefault","assignParentNodeRef","nav","assignOverflowButtonRef","li","assignHiddenMenuRef","ul","assignActiveMenuRef","componentWillMount","_this2","_props","menuItems","_props$renderMenuItem","renderMenuItem","undefined","mappedMenuItems","map","baseClassName","componentDidMount","parseInt","window","getComputedStyle","marginLeft","addEventListener","componentWillUnmount","removeEventListener","render","_props2","_props2$MenuText","MenuText","_props2$MoreText","MoreText","_state","aria-hidden","__WEBPACK_IMPORTED_MODULE_0_react__"],"mappings":"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","file":"react-priority-plus-nav.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"react\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"react\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"ReactPriorityPlusNav\"] = factory(require(\"react\"));\n\telse\n\t\troot[\"ReactPriorityPlusNav\"] = factory(root[\"React\"]);\n})(typeof self !== 'undefined' ? self : this, function(__WEBPACK_EXTERNAL_MODULE_3__) {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 0b006e59e0dd77dd04eb","import PriorityPlusNav from \"./PriorityPlusNav\";\n\nexport default PriorityPlusNav;\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","import PropTypes from \"prop-types\";\nimport React, { Component } from \"react\";\n\nconst baseClassName = \"cdl-ppnav\";\n\nconst defaultRenderMenuItem = props => {\n  const { itemDetails, captureRef, clickHandler, activeClass } = props;\n  const { uri, label, isActive } = itemDetails;\n\n  return (\n    <li className={isActive ? activeClass : \"\"} key={uri} ref={captureRef} onClick={clickHandler}>\n      <a href={uri}>{label}</a>\n    </li>\n  );\n};\n\ndefaultRenderMenuItem.propTypes = {\n  itemDetails: PropTypes.object,\n  captureRef: PropTypes.func,\n  clickHandler: PropTypes.func,\n  activeClass: PropTypes.string,\n};\n\nclass PriorityPlusNav extends Component {\n  state = {\n    items: [],\n    itemRefs: [],\n    activeItems: [],\n    inactiveItems: [],\n    overflowActive: false,\n  };\n\n  parentNode = null;\n  overflowButton = null;\n  hiddenMenu = null;\n  activeMenu = null;\n  itemMargin = 0;\n\n  // This is where most of the magic happens\n  updateMenuItems = items => {\n    if (items.length < 1) {\n      return;\n    }\n\n    let itemRefs = [];\n\n    if (this.activeMenu) {\n      // Combine the shown and hidden menu items to get accurate widths\n      const activeMenuChildren = [...this.activeMenu.children];\n      itemRefs = activeMenuChildren.slice(0, activeMenuChildren.length - 1).concat([...this.hiddenMenu.children]);\n    } else {\n      // if the active menu hasn't yet rendered, go ahead with the item references\n      itemRefs = this.state.itemRefs;\n    }\n\n    if (itemRefs.length < 1) {\n      this.setState({\n        activeItems: items,\n      });\n\n      return;\n    }\n\n    let totalWidth = 0;\n    const parentWidth = this.parentNode.offsetWidth;\n    const overflowedIndex = items.findIndex((item, index) => {\n      totalWidth = totalWidth +\n        itemRefs[index].offsetWidth +\n        this.itemMargin;\n\n      return totalWidth >= parentWidth;\n    });\n\n    const active = items.slice(0, overflowedIndex === -1 ? items.length : overflowedIndex);\n\n    // If some elements are wrapped, make sure there's room for the overflow button\n    if (active.length < items.length) {\n      if (\n        totalWidth + this.itemMargin + this.overflowButton.offsetWidth > parentWidth\n      ) {\n        active.pop();\n      }\n    }\n\n    // If there's only one overflowed item, pop it's sibling\n    // This ensures at least two elements are in the overflow.\n    if (items.length - active.length === 1) {\n      active.pop();\n    }\n\n    // set inactive elements\n    const inactive = items.slice(active.length);\n\n    this.setState({\n      activeItems: active,\n      inactiveItems: inactive,\n    });\n  };\n\n  handleMenuItemClick = () => {\n    if (this.state.overflowActive) {\n      this.setState({\n        overflowActive: false,\n      });\n    }\n  };\n\n  componentWillMount() {\n    const { menuItems, renderMenuItem = defaultRenderMenuItem } = this.props;\n\n    const itemRefs = [];\n\n    const mappedMenuItems = menuItems.map((item, index) =>\n      renderMenuItem({\n        itemDetails: item,\n        captureRef: li => {\n          itemRefs[index] = li;\n        },\n        clickHandler: this.handleMenuItemClick,\n        activeClass: `${baseClassName}__item--active`,\n      })\n    );\n\n    this.setState({\n      items: mappedMenuItems,\n      itemRefs: itemRefs,\n    });\n\n    this.updateMenuItems(mappedMenuItems);\n  };\n\n  componentDidMount() {\n    if (!this.activeMenu) {\n      return;\n    }\n\n    const items = this.activeMenu.children;\n\n\n    if (items.length > 1) {\n      this.itemMargin = parseInt(window.getComputedStyle(items[1]).marginLeft);\n    }\n\n    this.updateMenuItems(this.state.items);\n\n    window.addEventListener(\"resize\", this.handleResize);\n  };\n\n  componentWillUnmount() {\n    window.removeEventListener(\"resize\", this.handleResize);\n  };\n\n  toggleExtendedMenu = () => {\n    this.setState({\n      overflowActive: !this.state.overflowActive,\n    });\n  };\n\n  handleResize = () => {\n    this.updateMenuItems(this.state.items);\n  };\n\n  handleOverflowMenuClick = event => {\n    event.preventDefault();\n    this.toggleExtendedMenu();\n    return false;\n  };\n\n  // Assign item refs\n  // Heavy on the refs because we need to interact with \n  // DOM elements to get rendered widths etc.\n  assignParentNodeRef = nav => {\n    this.parentNode = nav;\n  };\n\n  assignOverflowButtonRef = li => {\n    this.overflowButton = li;\n  };\n\n  assignHiddenMenuRef = ul => {\n    this.hiddenMenu = ul;\n  };\n\n  assignActiveMenuRef = ul => {\n    this.activeMenu = ul;\n  };\n\n  render() {\n    const { MenuText = \"Menu\", MoreText = \"More\", className } = this.props;\n\n    const { activeItems, overflowActive, inactiveItems } = this.state;\n\n    return (\n      <nav\n        className={`${baseClassName} ${className ? className : \"\"}`}\n        ref={this.assignParentNodeRef}\n      >\n        {/*\n          displayed so we can calculate menu item widths \n          as they'd normally be displayed in the top menu\n        */}\n        <ul className={`${baseClassName}__hiddenNav`} aria-hidden=\"true\"  ref={this.assignHiddenMenuRef}>\n          {inactiveItems}\n        </ul>\n        <ul ref={this.assignActiveMenuRef}>\n          {activeItems}\n          <li\n            className={`${baseClassName}__indicator`}\n            aria-hidden={inactiveItems.length < 1}\n            ref={this.assignOverflowButtonRef}\n          >\n            <a\n              href=\"#all-nav\"\n              className={`${baseClassName}__button ${\n                activeItems.length > 0 ? \"\" : `${baseClassName}__button--compact`\n              }`}\n              onClick={this.handleOverflowMenuClick}\n            >\n              {activeItems.length > 0 ? MoreText : MenuText}\n            </a>\n            <ul className={`${baseClassName}__list`} aria-hidden={!overflowActive}>\n              {inactiveItems}\n            </ul>\n          </li>\n        </ul>\n      </nav>\n    );\n  }\n}\n\nPriorityPlusNav.propTypes = {\n  renderMenuItem: PropTypes.func,\n  MenuText: PropTypes.string,\n  MoreText: PropTypes.string,\n  menuItems: PropTypes.array,\n  className: PropTypes.string,\n};\n\nexport default PriorityPlusNav;\n\n\n\n// WEBPACK FOOTER //\n// ./src/PriorityPlusNav.js","module.exports = __WEBPACK_EXTERNAL_MODULE_3__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external {\"root\":\"React\",\"commonjs2\":\"react\",\"commonjs\":\"react\",\"amd\":\"react\"}\n// module id = 3\n// module chunks = 0"],"sourceRoot":""}