{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 23f031c6e7a963c25898","webpack:///./src/index.js","webpack:///./src/PriorityPlusNav.js","webpack:///external {\"root\":\"React\",\"commonjs2\":\"react\",\"commonjs\":\"react\",\"amd\":\"react\"}"],"names":["root","factory","exports","module","require","define","amd","self","this","__WEBPACK_EXTERNAL_MODULE_3__","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","__webpack_exports__","__WEBPACK_IMPORTED_MODULE_0__PriorityPlusNav__","defaultRenderMenuItem","props","itemDetails","captureRef","clickHandler","activeClass","uri","label","isActive","__WEBPACK_IMPORTED_MODULE_0_react___default","a","createElement","className","key","ref","onClick","href","PriorityPlusNav","state","items","itemRefs","activeItems","inactiveItems","overflowActive","parentNode","overflowButton","hiddenMenu","activeMenu","itemMargin","updateMenuItems","length","_this","_ref","_ref2","activeMenuChildren","concat","apply","children","slice","setState","totalWidth","parentStyle","window","getComputedStyle","parentWidth","clientWidth","parseInt","paddingLeft","paddingRight","overflowedIndex","findIndex","item","index","offsetWidth","active","activeRefs","reduce","sum","pop","inactive","handleMenuItemClick","toggleExtendedMenu","handleResize","handleOverflowMenuClick","event","preventDefault","assignParentNodeRef","nav","assignOverflowButtonRef","li","assignHiddenMenuRef","ul","assignActiveMenuRef","componentWillMount","_this2","_props","menuItems","_props$renderMenuItem","renderMenuItem","undefined","mappedMenuItems","map","baseClassName","componentDidMount","marginLeft","addEventListener","componentWillUnmount","removeEventListener","render","_props2","_props2$MenuText","MenuText","_props2$MoreText","MoreText","_state","aria-hidden","__WEBPACK_IMPORTED_MODULE_0_react__"],"mappings":"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","file":"react-priority-plus-nav.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"react\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"react\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"ReactPriorityPlusNav\"] = factory(require(\"react\"));\n\telse\n\t\troot[\"ReactPriorityPlusNav\"] = factory(root[\"React\"]);\n})(typeof self !== 'undefined' ? self : this, function(__WEBPACK_EXTERNAL_MODULE_3__) {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 23f031c6e7a963c25898","import PriorityPlusNav from \"./PriorityPlusNav\";\n\nexport default PriorityPlusNav;\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","import PropTypes from \"prop-types\";\nimport React, { Component } from \"react\";\n\nconst baseClassName = \"cdl-ppnav\";\n\nconst defaultRenderMenuItem = props => {\n  const { itemDetails, captureRef, clickHandler, activeClass } = props;\n  const { uri, label, isActive } = itemDetails;\n\n  return (\n    <li className={isActive ? activeClass : \"\"} key={uri} ref={captureRef} onClick={clickHandler}>\n      <a href={uri}>{label}</a>\n    </li>\n  );\n};\n\ndefaultRenderMenuItem.propTypes = {\n  itemDetails: PropTypes.object,\n  captureRef: PropTypes.func,\n  clickHandler: PropTypes.func,\n  activeClass: PropTypes.string,\n};\n\nclass PriorityPlusNav extends Component {\n  state = {\n    items: [],\n    itemRefs: [],\n    activeItems: [],\n    inactiveItems: [],\n    overflowActive: false,\n  };\n\n  parentNode = null;\n  overflowButton = null;\n  hiddenMenu = null;\n  activeMenu = null;\n  itemMargin = 0;\n\n  // This is where most of the magic happens\n  updateMenuItems = items => {\n    if (items.length < 1) {\n      return;\n    }\n\n    let itemRefs = [];\n\n    if (this.activeMenu) {\n      // Combine the shown and hidden menu items to get accurate widths\n      const activeMenuChildren = [].concat(...this.activeMenu.children);\n      itemRefs = activeMenuChildren.slice(0, activeMenuChildren.length - 1).concat([].concat(...this.hiddenMenu.children));\n    } else {\n      // if the active menu hasn't yet rendered, go ahead with the item references\n      itemRefs = this.state.itemRefs;\n    }\n\n    if (itemRefs.length < 1) {\n      this.setState({\n        activeItems: items,\n      });\n\n      return;\n    }\n\n    let totalWidth = 0;\n    const parentStyle = window.getComputedStyle(this.parentNode);\n    // Remove padding from parent width calculation\n    const parentWidth = this.parentNode.clientWidth - parseInt(parentStyle.paddingLeft) - parseInt(parentStyle.paddingRight);\n\n    const overflowedIndex = items.findIndex((item, index) => {\n\n      totalWidth = totalWidth +\n        itemRefs[index].offsetWidth +\n        this.itemMargin;\n\n      return totalWidth >= parentWidth;\n    });\n\n    const active = items.slice(0, overflowedIndex === -1 ? items.length : overflowedIndex);\n\n    // If some elements are wrapped, make sure there's room for the overflow button\n    if (active.length < items.length) {\n      // get the active menu item refs\n      const activeRefs = itemRefs.slice(0, overflowedIndex === -1 ? items.length : overflowedIndex);\n\n      //calculate the total active width\n      totalWidth = activeRefs.reduce((sum, item) => {\n        return sum + item.offsetWidth + this.itemMargin;\n      }, 0);\n\n      // add width of overflow button to total\n      totalWidth = totalWidth + this.overflowButton.offsetWidth;\n\n      // while there isn't enough room…\n      while (\n        totalWidth >= parentWidth\n      ) {\n        // …pop the last item\n        active.pop();\n        // and remove it's width\n        totalWidth = totalWidth - itemRefs[active.length].offsetWidth - this.itemMargin;\n      }\n    }\n\n    // If there's only one overflowed item, pop it's sibling\n    // This ensures at least two elements are in the overflow.\n    if (items.length - active.length === 1) {\n      active.pop();\n    }\n\n    // set inactive elements\n    const inactive = items.slice(active.length);\n\n    this.setState({\n      activeItems: active,\n      inactiveItems: inactive,\n    });\n  };\n\n  handleMenuItemClick = () => {\n    if (this.state.overflowActive) {\n      this.setState({\n        overflowActive: false,\n      });\n    }\n  };\n\n  componentWillMount() {\n    const { menuItems, renderMenuItem = defaultRenderMenuItem } = this.props;\n\n    const itemRefs = [];\n\n    const mappedMenuItems = menuItems.map((item, index) =>\n      renderMenuItem({\n        itemDetails: item,\n        captureRef: li => {\n          itemRefs[index] = li;\n        },\n        clickHandler: this.handleMenuItemClick,\n        activeClass: `${baseClassName}__item--active`,\n      })\n    );\n\n    this.setState({\n      items: mappedMenuItems,\n      itemRefs: itemRefs,\n    });\n\n    this.updateMenuItems(mappedMenuItems);\n  };\n\n  componentDidMount() {\n    if (!this.activeMenu) {\n      return;\n    }\n\n    const items = this.activeMenu.children;\n\n\n    if (items.length > 1) {\n      this.itemMargin = parseInt(window.getComputedStyle(items[1]).marginLeft);\n    }\n\n    this.updateMenuItems(this.state.items);\n\n    window.addEventListener(\"resize\", this.handleResize);\n  };\n\n  componentWillUnmount() {\n    window.removeEventListener(\"resize\", this.handleResize);\n  };\n\n  toggleExtendedMenu = () => {\n    this.setState({\n      overflowActive: !this.state.overflowActive,\n    });\n  };\n\n  handleResize = () => {\n    this.updateMenuItems(this.state.items);\n  };\n\n  handleOverflowMenuClick = event => {\n    event.preventDefault();\n    this.toggleExtendedMenu();\n    return false;\n  };\n\n  // Assign item refs\n  // Heavy on the refs because we need to interact with \n  // DOM elements to get rendered widths etc.\n  assignParentNodeRef = nav => {\n    this.parentNode = nav;\n  };\n\n  assignOverflowButtonRef = li => {\n    this.overflowButton = li;\n  };\n\n  assignHiddenMenuRef = ul => {\n    this.hiddenMenu = ul;\n  };\n\n  assignActiveMenuRef = ul => {\n    this.activeMenu = ul;\n  };\n\n  render() {\n    const { MenuText = \"Menu\", MoreText = \"More\", className } = this.props;\n\n    const { activeItems, overflowActive, inactiveItems } = this.state;\n\n    return (\n      <nav\n        className={`${baseClassName} ${className ? className : \"\"}`}\n        ref={this.assignParentNodeRef}\n      >\n        {/*\n          displayed so we can calculate menu item widths \n          as they'd normally be displayed in the top menu\n        */}\n        <ul className={`${baseClassName}__hiddenNav`} aria-hidden=\"true\"  ref={this.assignHiddenMenuRef}>\n          {inactiveItems}\n        </ul>\n        <ul ref={this.assignActiveMenuRef}>\n          {activeItems}\n          <li\n            className={`${baseClassName}__indicator`}\n            aria-hidden={inactiveItems.length < 1}\n            ref={this.assignOverflowButtonRef}\n          >\n            <a\n              href=\"#all-nav\"\n              className={`${baseClassName}__button ${\n                activeItems.length > 0 ? \"\" : `${baseClassName}__button--compact`\n              }`}\n              onClick={this.handleOverflowMenuClick}\n            >\n              {activeItems.length > 0 ? MoreText : MenuText}\n            </a>\n            <ul className={`${baseClassName}__list`} aria-hidden={!overflowActive}>\n              {inactiveItems}\n            </ul>\n          </li>\n        </ul>\n      </nav>\n    );\n  }\n}\n\nPriorityPlusNav.propTypes = {\n  renderMenuItem: PropTypes.func,\n  MenuText: PropTypes.string,\n  MoreText: PropTypes.string,\n  menuItems: PropTypes.array,\n  className: PropTypes.string,\n};\n\nexport default PriorityPlusNav;\n\n\n\n// WEBPACK FOOTER //\n// ./src/PriorityPlusNav.js","module.exports = __WEBPACK_EXTERNAL_MODULE_3__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external {\"root\":\"React\",\"commonjs2\":\"react\",\"commonjs\":\"react\",\"amd\":\"react\"}\n// module id = 3\n// module chunks = 0"],"sourceRoot":""}